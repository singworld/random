(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"168a":function(n,e,t){},"36e2":function(n,e,t){"use strict";(function(n){t("c98d");o(t("66fd"));var e=o(t("f6ad"));function o(n){return n&&n.__esModule?n:{default:n}}n(e.default)}).call(this,t("543d")["createPage"])},"56d0":function(n,e,t){"use strict";t.d(e,"b",(function(){return u})),t.d(e,"c",(function(){return a})),t.d(e,"a",(function(){return o}));var o={uAvatar:function(){return t.e("uview-ui/components/u-avatar/u-avatar").then(t.bind(null,"1312"))},uButton:function(){return t.e("uview-ui/components/u-button/u-button").then(t.bind(null,"14a4"))},uGap:function(){return t.e("uview-ui/components/u-gap/u-gap").then(t.bind(null,"0e67"))},uCard:function(){return t.e("uview-ui/components/u-card/u-card").then(t.bind(null,"a2ae"))},uSwipeAction:function(){return t.e("uview-ui/components/u-swipe-action/u-swipe-action").then(t.bind(null,"7b73"))},uPopup:function(){return t.e("uview-ui/components/u-popup/u-popup").then(t.bind(null,"b42c"))},uLine:function(){return t.e("uview-ui/components/u-line/u-line").then(t.bind(null,"c858"))},uUpload:function(){return t.e("uview-ui/components/u-upload/u-upload").then(t.bind(null,"cbe5"))},uIcon:function(){return t.e("uview-ui/components/u-icon/u-icon").then(t.bind(null,"b170"))},uInput:function(){return Promise.all([t.e("common/vendor"),t.e("uview-ui/components/u-input/u-input")]).then(t.bind(null,"fde9"))},uTabbar:function(){return Promise.all([t.e("common/vendor"),t.e("uview-ui/components/u-tabbar/u-tabbar")]).then(t.bind(null,"bdf5"))}},u=function(){var n=this,e=n.$createElement,t=(n._self._c,n.userInfo.avatarUrl?n._f("formatSex")(n.userInfo.gender):null);n.$mp.data=Object.assign({},{$root:{f0:t}})},a=[]},"6d9b":function(n,e,t){"use strict";var o=t("168a"),u=t.n(o);u.a},"7b1a":function(n,e,t){"use strict";t.r(e);var o=t("88c2"),u=t.n(o);for(var a in o)"default"!==a&&function(n){t.d(e,n,(function(){return o[n]}))}(a);e["default"]=u.a},"88c2":function(n,e,t){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=s(t("a34a")),u=s(t("fad6")),a=s(t("b6a5")),r=c(t("c589"));function i(){if("function"!==typeof WeakMap)return null;var n=new WeakMap;return i=function(){return n},n}function c(n){if(n&&n.__esModule)return n;if(null===n||"object"!==typeof n&&"function"!==typeof n)return{default:n};var e=i();if(e&&e.has(n))return e.get(n);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in n)if(Object.prototype.hasOwnProperty.call(n,u)){var a=o?Object.getOwnPropertyDescriptor(n,u):null;a&&(a.get||a.set)?Object.defineProperty(t,u,a):t[u]=n[u]}return t.default=n,e&&e.set(n,t),t}function s(n){return n&&n.__esModule?n:{default:n}}function l(n,e,t,o,u,a,r){try{var i=n[a](r),c=i.value}catch(s){return void t(s)}i.done?e(c):Promise.resolve(c).then(o,u)}function f(n){return function(){var e=this,t=arguments;return new Promise((function(o,u){var a=n.apply(e,t);function r(n){l(a,o,u,r,i,"next",n)}function i(n){l(a,o,u,r,i,"throw",n)}r(void 0)}))}}var d=getApp(),p={data:function(){return{thumb:"https://wx.jianxiaoxin.com/wx/storage/fetch/9ykjwr5fb8947rmilsx9.png",action:a.default.Upload,remark:"",TabbarList:null,activeId:null,activeIndex:null,customStyle:{marginTop:"20px",color:"white",width:"350rpx",background:"#FF99CC"},userInfo:{nickName:"小可爱",avatarUrl:null,gender:1},current:0,taskList:[],disabled:!1,btnWidth:180,show:!1,options:[{text:"打卡",style:{backgroundColor:"#007aff"}},{text:"删除",style:{backgroundColor:"#dd524d"}}]}},computed:{welcomeMessage:function(){var n=new Date,e=n.getHours(),t="早上好";return t=e<6?"凌晨好，":e<9?"早上好，":e<12?"上午好，":e<14?"中午好，":e<17?"下午好，":e<19?"傍晚好，":e<22?"晚上好，":"夜里好，",t}},methods:{submit:function(){var e=this;return f(o.default.mark((function t(){var u;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n.getStorageSync("token"),console.log("activeId",e.activeId),e.$refs.uUpload.formData={remark:e.remark,activeId:e.activeId},u={"Content-Type":"application/json","X-Litemall-Token":n.getStorageSync("token")},e.$refs.uUpload.header=u,t.next=7,e.$refs.uUpload.upload();case 7:t.sent,e.$refs.uUpload.remove(0),e.taskList.splice(e.activeIndex,1),e.show=!1;case 11:case"end":return t.stop()}}),t)})))()},getUserProfile:function(){var e=this;n.getUserProfile({desc:"获取头像",success:function(n){console.log("userInfo",n.userInfo),e.userInfo=n.userInfo,e.saveUserInfo()},fail:function(n){console.log("eeeee",n)}})},saveUserInfo:function(){u.default.request(a.default.SaveUserInfoApi,{userInfo:this.userInfo},"POST").then((function(n){console.log("save",n),0===n.errno?wx.setStorageSync("userInfo",n.data.userInfo):console.log(n)})).catch((function(n){console.log(n)}))},getTaskIndex:function(){var n=this;u.default.request(a.default.TaskIndex).then((function(e){console.log("getTaskIndex",e),0===e.errno?n.taskList=e.data.taskList:console.log(e)})).catch((function(n){console.log(n)}))},click:function(n,e){1==e?(this.taskList.splice(n,1),this.$u.toast("删除了第".concat(n,"个cell"))):(this.activeIndex=n,this.activeId=this.taskList[n].id,this.show=!0)},open:function(n){var e=this;this.taskList[n].show=!0,this.taskList.map((function(t,o){n!=o&&(e.taskList[o].show=!1)}))}},onShareAppMessage:function(e){var t=n.getStorageSync("distSource");if(t)return{title:"欢迎使用",type:0,path:"/pages/index/index?id="+t,summary:"",imageUrl:"https://58d.oss-cn-hangzhou.aliyuncs.com/goods/ttg_1596073788000.png"}},onShareTimeline:function(e){var t=n.getStorageSync("distSource");if(t)return{title:"欢迎使用",type:0,query:"id="+t,summary:"",imageUrl:""}},onLoad:function(){var e=this;console.log("页面加载"),wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]});var t=n.getStorageSync("userInfo");console.log("onload里面的userInfo",t);var o=n.getStorageSync("token");console.log("onload里面的token",o),n.removeStorageSync("token"),this.TabbarList=a.default.TabbarList,r.checkLogin().catch((function(n){r.loginByWeixin().then((function(n){console.log("resvue",n),d.globalData.hasLogin=!0,console.log("globalData.hasLogin",d.globalData.hasLogin),e.getTaskIndex()})).catch((function(n){d.globalData.hasLogin=!1,console.log("微信登录失败")}))})).catch((function(e){n.showToast({title:"失败",duration:2e3})}))},onShow:function(){this.getTaskIndex()},onReady:function(){var e=n.getStorageSync("userInfo");console.log("onReady 里面的userInfo",e),e.nickName&&(this.userInfo=e)}};e.default=p}).call(this,t("543d")["default"])},f6ad:function(n,e,t){"use strict";t.r(e);var o=t("56d0"),u=t("7b1a");for(var a in u)"default"!==a&&function(n){t.d(e,n,(function(){return u[n]}))}(a);t("6d9b");var r,i=t("f0c5"),c=Object(i["a"])(u["default"],o["b"],o["c"],!1,null,"2982c124",null,!1,o["a"],r);e["default"]=c.exports}},[["36e2","common/runtime","common/vendor"]]]);