(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/todo/index"],{"5ee9":function(n,t,o){"use strict";(function(n){o("a7bb");e(o("66fd"));var t=e(o("7777"));function e(n){return n&&n.__esModule?n:{default:n}}n(t.default)}).call(this,o("543d")["createPage"])},6361:function(n,t,o){},7777:function(n,t,o){"use strict";o.r(t);var e=o("7e92"),i=o("d606");for(var u in i)"default"!==u&&function(n){o.d(t,n,(function(){return i[n]}))}(u);o("8359");var r,a=o("f0c5"),c=Object(a["a"])(i["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],r);t["default"]=c.exports},"7e92":function(n,t,o){"use strict";o.d(t,"b",(function(){return i})),o.d(t,"c",(function(){return u})),o.d(t,"a",(function(){return e}));var e={uForm:function(){return o.e("uview-ui/components/u-form/u-form").then(o.bind(null,"b86b"))},uFormItem:function(){return Promise.all([o.e("common/vendor"),o.e("uview-ui/components/u-form-item/u-form-item")]).then(o.bind(null,"869d"))},uInput:function(){return Promise.all([o.e("common/vendor"),o.e("uview-ui/components/u-input/u-input")]).then(o.bind(null,"a81d"))},uNumberBox:function(){return o.e("uview-ui/components/u-number-box/u-number-box").then(o.bind(null,"1ff7"))},uButton:function(){return o.e("uview-ui/components/u-button/u-button").then(o.bind(null,"3395"))},uLoading:function(){return o.e("uview-ui/components/u-loading/u-loading").then(o.bind(null,"c914"))},uTabbar:function(){return Promise.all([o.e("common/vendor"),o.e("uview-ui/components/u-tabbar/u-tabbar")]).then(o.bind(null,"3e15"))},uModal:function(){return o.e("uview-ui/components/u-modal/u-modal").then(o.bind(null,"ed70"))}},i=function(){var n=this,t=n.$createElement;n._self._c;n._isMounted||(n.e0=function(n,t){var o=arguments[arguments.length-1].currentTarget.dataset,e=o.eventParams||o["event-params"];t=e.item;t.weights++})},u=[]},8359:function(n,t,o){"use strict";var e=o("6361"),i=o.n(e);i.a},bd16:function(n,t,o){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=u(o("96d8")),i=u(o("2520"));function u(n){return n&&n.__esModule?n:{default:n}}function r(n){return s(n)||l(n)||c(n)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(n,t){if(n){if("string"===typeof n)return f(n,t);var o=Object.prototype.toString.call(n).slice(8,-1);return"Object"===o&&n.constructor&&(o=n.constructor.name),"Map"===o||"Set"===o?Array.from(n):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?f(n,t):void 0}}function l(n){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)}function s(n){if(Array.isArray(n))return f(n)}function f(n,t){(null==t||t>n.length)&&(t=n.length);for(var o=0,e=new Array(t);o<t;o++)e[o]=n[o];return e}var d=function(){Promise.all([o.e("common/vendor"),o.e("components/uni-luck-draw/lucky-wheel")]).then(function(){return resolve(o("aea4"))}.bind(null,o)).catch(o.oe)},g={components:{LuckyWheel:d},data:function(){return{configList:[],value:"hello",total:1,show:!1,showload:!1,content:"点确认添加到任务列表，取消重新选择!",TabbarList:null,blocks:[{padding:"13px",background:"#FF99CC"}],buttons:[{radius:"50px",background:"#d64737"},{radius:"45px",background:"#fff"},{radius:"41px",background:"#f6c66f",pointer:!0},{radius:"35px",background:"#ffdea0",fonts:[{text:"简单\n选择",fontSize:"18px",top:-18}]}],prizes:[],defaultStyle:{fontColor:"#FF99CC",fontSize:"14px"}}},onLoad:function(){this.TabbarList=e.default.TabbarList,this.getTtConfig()},onReady:function(){},methods:{modfiy:function(n,t){console.log("ididi",t);var o={id:n,name:t};this.modifyConfig(o)},submit:function(t){var o=this;console.log("formName",this.configList),i.default.request(e.default.AddOrUpdate,this.configList,"POST").then((function(t){console.log("save",t),0===t.errno?(n.showToast({title:"保存成功",duration:2e3}),o.bulidMap()):console.log(t)})).catch((function(n){console.log(n)}))},modifyConfig:function(n){var t=this;i.default.request(e.default.ModifyConfig,{id:n.id,name:n.name},"POST").then((function(n){console.log("save",n),0===n.errno?t.getTtConfig():console.log(n)})).catch((function(n){console.log(n)}))},random_weight:function(){var n=this.total,t=Math.random()*n>>0,o=0,e=0,i=r(Array(6).keys());for(var u in i)if(o+=this.configList[u].weights,t<=o){e=u;break}return e},startCallBack:function(){var n=this;this.$refs.luckyWheel.play(),setTimeout((function(){var t=n.random_weight();n.$refs.luckyWheel.stop(t)}),500)},endCallBack:function(t){var o=this;console.log(t),n.showModal({title:"提示",content:"确认添加，取消重转",success:function(n){n.confirm?(console.log("用户点击确定"),o.saveTtlist(t)):n.cancel&&console.log("用户点击取消")}})},getTtConfig:function(){var n=this;i.default.request(e.default.GetConfig).then((function(t){if(console.log("save",t),0===t.errno){var o=t.data.configList;n.configList=o,n.bulidMap()}else console.log(t)})).catch((function(n){console.log(n)}))},bulidMap:function(){var n=[];if(!this.configList||this.configList.length<1)for(var t=0;t<6;t++)this.configList.push({id:t,name:"第"+(t+1)+"个任务",weights:1});this.total=this.configList.reduce((function(n,t){return n+Number(t.weights||0)}),0),this.configList.forEach((function(t,e){var i=t.name;n.push({title:""+i,background:e%2?"#f9e3bb":"#f8d384",fonts:[{text:i,top:"10%"}],imgs:[{src:o("b530"),width:"30%",top:"35%"}]})})),this.prizes=n},addConfig:function(){var n=this;this.showload=!0,i.default.request(e.default.AddConfig).then((function(t){0===t.errno?(n.getTtConfig(),n.this.showload=!1):console.log(t)})).catch((function(n){console.log(n)}))},saveTtlist:function(t){var o={name:t.title,icon:t.imgs};console.log("ttList",o);var u=t.title;i.default.request(e.default.SaveTtlist,{name:u,title:u},"POST").then((function(t){console.log("save",t),0===t.errno?n.switchTab({url:"/pages/index/index",success:function(n){var t=getCurrentPages().pop();void 0!=t&&null!=t&&t.onLoad()}}):console.log(t)})).catch((function(n){console.log(n)}))}}};t.default=g}).call(this,o("543d")["default"])},d606:function(n,t,o){"use strict";o.r(t);var e=o("bd16"),i=o.n(e);for(var u in e)"default"!==u&&function(n){o.d(t,n,(function(){return e[n]}))}(u);t["default"]=i.a}},[["5ee9","common/runtime","common/vendor"]]]);